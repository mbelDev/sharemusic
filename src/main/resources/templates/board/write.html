<!DOCTYPE html>
<html
  lang="en"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  xmlns:th="http://www.thymeleaf.org"
  layout:decorate="~{/include/layout.html}"
>
  <main id="mainPage-Area" class="container" layout:fragment="contents">
    <section class="boardWrite-page">
      <article class="boardWrite-page--form">
        <form action="/board/write" method="POST">
          <div class="boardWrite-pag--item form-floating">
            <input
              type="text"
              class="form-control"
              id="floatingPassword"
              placeholder="곡 이름"
              name="postTitle"
            />
            <label for="floatingPassword">곡 이름</label>
          </div>
          <div class="boardWrite-pag--item form-floating">
            <input
              type="text"
              class="form-control"
              id="floatingPassword"
              placeholder="가수 이름"
              name="postSinger"
            />
            <label for="floatingPassword">가수 이름</label>
          </div>
          <div class="boardWrite-pag--item form-floating">
            <textarea
              class="form-control"
              placeholder="Leave a comment here"
              id="floatingTextarea"
              name="postCont"
            ></textarea>
            <label for="floatingTextarea">설명(150자 이내)</label>
          </div>
          <div class="boardWrite-pag--item form-floating">
            <textarea
              class="form-control postLink"
              placeholder="Leave a comment here"
              id="floatingTextarea"
              name="postLink"
            ></textarea>
            <label for="floatingTextarea">유튜브 링크</label>
          </div>
          <p>장르</p>
          <div class="boardWrite-pag--item input-group">
            <select
              class="form-select"
              id="inputGroupSelect04"
              aria-label="Example select with button addon"
              name="postGenre"
            >
              <option value="락">락</option>
              <option value="발라드">발라드</option>
              <option value="팝">팝</option>
              <option value="재즈">재즈</option>
              <option value="메탈">메탈</option>
              <option value="EDM">EDM</option>
              <option value="보컬로이드">보컬로이드</option>
              <option value="etc">기타</option>
            </select>
            <button
              id="modalBox01"
              class="btn btn-outline-secondary"
              type="button"
            >
              Button
            </button>
          </div>
          <p>감성</p>
          <div class="boardWrite-pag--item input-group">
            <select
              class="form-select"
              id="inputGroupSelect04"
              aria-label="Example select with button addon"
              name="postEmote"
            >
              <option value="신남">신남</option>
              <option value="우울">우울</option>
              <option value="희열">희열</option>
              <option value="으스스">으스스</option>
              <option value="etc">기타</option>
            </select>
            <button
              id="modalBox02"
              class="btn btn-outline-secondary"
              type="button"
            >
              Button
            </button>
          </div>
          <div>
            <button type="submit" class="btnConfirm">등록</button>
            <button>취소</button>
          </div>
        </form>
      </article>
    </section>
    <!-- boardWrite-page -->

    <!-- 모달창 -->
    <div id="modal01" class="modal-wnd">
      <div class="modal-wnd-item">
        <button id="closeModal01">닫기</button>
        <div class="modal-content">
          <!-- 모달창 안에 여기 내용 작성 -->
          <span>TEST01</span>
        </div>
        <!-- ModalThis-content -->
      </div>
      <!-- write-modal--item -->
    </div>
    <div id="modal02" class="modal-wnd">
      <div class="modal-wnd-item">
        <button id="closeModal02">닫기</button>
        <div class="modal-content">
          <span>TEST02</span>
          <!-- 모달창 안에 여기 내용 작성 -->
          <span>TEST</span>
        </div>
        <!-- ModalThis-content -->
      </div>
      <!-- write-modal--item -->
    </div>
    <!-- write-modal -->
    <script>
      getModal($("#modalBox01"),$("#modal01"),$("#closeModal01"));
      getModal($("#modalBox02"),$("#modal02"),$("#closeModal02"));
    </script>
    <script>
      // 유튜브 링크가 맞는지 확인&링크에서 영상의 id만 뽑아오기
      $(".btnConfirm").on("click", function () {
        const url = $(".postLink").val();
        const regExp =
          "^.*(?:(?:youtu\\.be\\/|v\\/|vi\\/|u\\/\\w\\/|embed\\/)|(?:(?:watch)?\\?v(?:i)?=|\\&v(?:i)?=))([^#\\&\\?]*).*";
        const match = url.match(regExp);

        if (match) {
          const getId = match[1];
          $(".postLink").val(match[1]);
          return true;
        } else {
          // 유튜브 링크를 다시 확인하라고 경고 창
          alert("다시 확인해주세요.");
        }
        return false;
      });
    </script>
  </main>
</html>
