<!DOCTYPE html>
<html
  lang="en"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  xmlns:th="http://www.thymeleaf.org"
  layout:decorate="~{/include/layout.html}"
>
  <main id="mainPage-Area" class="" layout:fragment="contents">
    <!-- <span th:text="${postList}"></span> -->
    <section class="main-constent--itmes">
      <article class="main-constent--ranking">
        <div class="ranking-area line topAndbut">
          <!-- 상위 랭킹 -->
          <h1 class="topAndbut">랭킹</h1>
          <div class="ranking-box topAndbut">
            <div class="swiper mySwiper">
              <ul class="swiper-wrapper">
                <li class="swiper-slide" th:each="item, i : ${rankList}">
                  <a
                    href="/board/view"
                    th:href="@{/board/view(postNo=${item.postNo})}"
                  >
                    <div class="swiper-title">
                      <img
                        th:src="@{${'https://img.youtube.com/vi/' + item.postLink + '/mqdefault.jpg'}}"
                      />
                      <div class="swiper-title-num">
                        <!-- <p class="" th:text="${i.count}">랭킹넘버</p> -->
                        <p class=""><img src="/images/num01.png" alt="" /></p>
                      </div>
                      <!-- swiper-title-num -->
                      <div class="swiper-txt">
                        <div class="swiper-txts">
                          <div class="swiper-txts--postTitle">
                            <p class="" th:text="${item.postTitle}">곡이름</p>
                            <p class="" th:text="${item.postSinger}">
                              가수이름
                            </p>
                          </div>
                          <div class="swiper-txts--postAuth">
                            <p class="" th:text="${item.postAuth}">별명</p>
                          </div>
                        </div>
                      </div>
                      <!-- swiper-txt -->
                    </div>
                    <!-- swiper-title -->
                  </a>
                </li>
              </ul>
            </div>
          </div>
          <!-- ranking-box -->
        </div>
        <!-- ranking-area -->
      </article>
      <!-- main-constent--slider -->
      <article class="main-constent--listItem listItem--center">
        <div class="listItem-nav">
          <h1 class="topAndbut">뮤직리스트</h1>
          <div class="update-data topAndbut">
            <!-- 정렬 -->
            <!-- 메인, 장르별일때 -->
            <ul th:if="${emote} == null">
              <li>
                <a
                  href="#"
                  th:href="@{/mainPage/{genre}(genre=${genre}, sort=postNo, searchTxt=${param.searchTxt})}"
                  >최신순</a
                >
              </li>
              <li>
                <a
                  href="#"
                  th:href="@{/mainPage/{genre}(genre=${genre}, sort=postHits, searchTxt=${param.searchTxt})}"
                  >조회순</a
                >
              </li>
              <li>
                <a
                  href="#"
                  th:href="@{/mainPage/{genre}(genre=${genre}, sort=postLike, searchTxt=${param.searchTxt})}"
                  >추천순</a
                >
              </li>
            </ul>
            <ul th:unless="${emote} == null">
              <!-- 감성별일때 -->
              <li>
                <a
                  href="#"
                  th:href="@{/mainPage/{genre}/{emote}(emote=${emote}, sort=postNo, searchTxt=${param.searchTxt})}"
                  >최신순</a
                >
              </li>
              <li>
                <a
                  href="#"
                  th:href="@{/mainPage/{genre}/{emote}(emote=${emote}, sort=postHits, searchTxt=${param.searchTxt})}"
                  >조회순</a
                >
              </li>
              <li>
                <a
                  href="#"
                  th:href="@{/mainPage/{genre}/{emote}(emote=${emote}, sort=postLike, searchTxt=${param.searchTxt})}"
                  >추천순</a
                >
              </li>
            </ul>
          </div>
        </div>
        <!-- listItem-nav -->
        <div class="getList-ItemBox">
          <ul id="test">
            <li th:each="item : ${postList}">
              <a
                href="/board/view"
                th:href="@{/board/view(postNo=${item.postNo})}"
              >
                <div class="ItemBox-imgs">
                  <img
                    th:src="@{${'https://img.youtube.com/vi/' + item.postLink + '/mqdefault.jpg'}}"
                  />
                </div>
                <!-- ItemBox-imgs -->
                <div class="ItemBox-content">
                  <p class="ItemBox-postTitle" th:text="${item.postTitle}">
                    곡이름
                  </p>
                  <p class="ItemBox-postSinger" th:text="${item.postSinger}">
                    가수이름
                  </p>
                  <p class="ItemBox-postAuth" th:text="${item.postAuth}">
                    별명
                  </p>
                </div>
                <!-- ItemBox-content -->
              </a>
            </li>
          </ul>
        </div>
        <!-- getList-ItemBox -->
      </article>
      <!-- main-constent--listItem -->
    </section>
    <!-- main-constent--itmes -->

    <script>
      function testRespone01(genre) {
        $.ajax({
          url: "/reload/" + genre,
          type: "GET",
          data: {
            genre: genre,
            searchTxt: "",
            sort: "postNo",
          },
          async: false,
          success: function (response) {
            console.log(response);
            alert("댓글이 등록되었습니다.");
          },
        }).done(function (fragment) {
          $("#test").replaceWith(fragment);
        });
      }
    </script>
    <script>
      function testRespone02(genre, searchTxt, sort) {
        $.ajax({
          url: "/reload/",
          type: "POST",
          data: {
            genre: genre,
            searchTxt: searchTxt,
            sort: sort,
          },
          async: false,
          success: function (response) {
            console.log(response);
            alert("댓글이 등록되었습니다.");
          },
        }).done(function (fragment) {
          $("#test").replaceWith(fragment);
        });
      }
    </script>
  </main>
</html>
